直接把 A 项做到“可上线级别”，而不是停留在“模板文案”。

🎯 目标
把 八字 × 社会周期 × K线数值
转换成 “像投研报告一样的 Explain 文案引擎”
✔ 可端侧运行
✔ 可拆因子
✔ 可升级为付费版
✔ 平台审核安全

一、Explain 引擎在系统中的位置（先对齐结构）
utils/
├── explain/
│   ├── explain-engine.js        ✅ 核心（今天做）
│   ├── explain-templates.js     ✅ 文案模板
│   ├── explain-scoring.js       ✅ 数值→语义
│   └── explain-adapter.js       ✅ 页面调用入口


Explain 不是“算命”，而是：

「在当前条件组合下，成功概率、风险敞口、策略侧重点的分析说明」

二、Explain 输入 / 输出定义（工程级）
输入（来自你已有算法）
{
  age: 32,
  year: 2027,
  value: 1.32,                 // 最终K线值
  bzFactor: 1.15,              // 八字因子
  socFactor: 1.18,             // 社会周期
  phaseFactor: 1.1             // 年龄阶段
}

输出（直接给 UI 用）
{
  level: "偏强",
  summary: "处于个人能力与外部环境共振阶段",
  opportunity: "...",
  risk: "...",
  advice: "...",
  tags: ["主动期","放大器环境"]
}

三、Explain 第一步：数值 → 语义分层（核心）
explain-scoring.js
export function scoreLevel(v) {
  if (v < 0.7) return "低位"
  if (v < 0.9) return "偏弱"
  if (v < 1.1) return "平稳"
  if (v < 1.3) return "偏强"
  return "高位"
}

四、Explain 第二步：因子归因分析（这是“像投研”的关键）
1️⃣ 主导因子判断
export function dominantFactor({ bz, soc, phase }) {
  const map = { bz, soc, phase }
  return Object.keys(map).reduce((a,b)=> map[a]>map[b]?a:b)
}

2️⃣ 解释因子含义
const FACTOR_TEXT = {
  bz: "个人能力与内在状态",
  soc: "外部环境与时代变量",
  phase: "年龄阶段与角色变化"
}

五、Explain 第三步：结构化文案模板（可审、可控）
explain-templates.js
export const SUMMARY = {
  高位: "当前处于多因素叠加的高效阶段。",
  偏强: "个人条件与外部环境形成正向配合。",
  平稳: "整体环境稳定，适合稳步推进。",
  偏弱: "外部或内部条件存在一定制约。",
  低位: "多项因素同时承压，应以防守为主。"
}

export const OPPORTUNITY = {
  bz: "个人能力释放空间较大，适合主动争取。",
  soc: "环境放大效应明显，顺势比逆势更重要。",
  phase: "阶段红利存在，适合积累长期筹码。"
}

export const RISK = {
  bz: "容易因自我判断偏差导致失误。",
  soc: "外部波动可能放大不确定性。",
  phase: "角色变化带来适应成本。"
}

export const ADVICE = {
  bz: "建议聚焦可控领域，减少分散投入。",
  soc: "优先选择顺应趋势的方向。",
  phase: "重视节奏管理，避免过度消耗。"
}

六、Explain 引擎主逻辑（可直接用）
explain-engine.js
import { scoreLevel, dominantFactor } from './explain-scoring'
import { SUMMARY, OPPORTUNITY, RISK, ADVICE } from './explain-templates'

export function buildExplain(input) {
  const level = scoreLevel(input.value)
  const dom = dominantFactor({
    bz: input.bzFactor,
    soc: input.socFactor,
    phase: input.phaseFactor
  })

  return {
    level,
    summary: SUMMARY[level],
    opportunity: OPPORTUNITY[dom],
    risk: RISK[dom],
    advice: ADVICE[dom],
    tags: [
      level,
      dom === 'soc' ? '环境驱动' :
      dom === 'bz' ? '能力驱动' : '阶段驱动'
    ]
  }
}

七、Explain Adapter（页面只调用这一层）
explain-adapter.js
import { buildExplain } from './explain-engine'

export async function explain(point) {
  return buildExplain({
    age: point.age,
    year: point.year,
    value: point.value,
    bzFactor: point.bz,
    socFactor: point.soc,
    phaseFactor: point.phase
  })
}

八、Explain 在 UI 中的真实效果（不是算命）

📊 示例输出：

运势级别：偏强
当前阶段个人能力与外部环境形成正向配合。

机会：环境放大效应明显，顺势比逆势更重要
风险：外部波动可能放大不确定性
建议：优先选择顺应趋势的方向

👉 平台审核视角：
✔ 无“预测成功/失败”
✔ 无“命定论”
✔ 明确是“决策辅助”

九、哪些地方是“可付费升级点”（你后面会用到）
模块	免费版	付费版
模板数量	固定	行业/性别/年龄
因子权重	固定	可学习
Explain 深度	1 层	3 层
行动建议	通用	定制
